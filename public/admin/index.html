<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Color-game dashboard</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />
</head>

<body>
    <div class="container-fluid">
        <div class="row mt-3">
            <div class="col-3">
                <div class="card text-center">
                    <div class="m-2">
                        <h2 class="mt-3">Dashboard</h2>
                        <div class="card-body">
                            <nav class="nav flex-column nav-pills">
                                <a class="nav-link active" href="#">Main</a>
                                <a class="nav-link" href="#">Link</a>
                                <a class="nav-link" href="#">Link</a>
                            </nav>
                            <hr>
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                    <span id="ver_tag" class="badge badge-success">xxxxxxx</span>
                                </li>
                                <li class="nav-item">
                                    Build on <span class="badge badge-info" id="build_time">??????</span>
                                </li>
                            </ul>
                            <hr>
                            <ul class="nav flex-column">
                                <div id="not_login_links">
                                    <a class="nav-link" href="./login.html">Login</a>
                                </div>
                                <div id="login_links" class="d-none">
                                    <li class="nav-item">
                                        UID:
                                        <span class="badge badge-primary" id="uid">XXXXXX</span>
                                    </li>
                                    <li class="nav-item">
                                        Email:
                                        <span class="badge badge-primary" id="email">XXXX@YYY.ZZ</span>
                                    </li>
                                    <li class="nav-item">
                                        IsAdmin:
                                        <span class="badge badge-secondary" id="isAdmin">n/a</span>
                                    </li>
                                    <a class="nav-link btn btn-secondary mt-2" href="./logout.html">Logout</a>
                                </div>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-9">
                
            </div>
        </div>
    </div>


    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-analytics.js"></script>

    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyAvtY9gERC7nJ0L4M8Dqlgfe_YNak-DZwI",
            authDomain: "color-game-a5025.firebaseapp.com",
            databaseURL: "https://color-game-a5025.firebaseio.com",
            projectId: "color-game-a5025",
            storageBucket: "color-game-a5025.appspot.com",
            messagingSenderId: "490543334730",
            appId: "1:490543334730:web:186a18e9a2685205c8edb3",
            measurementId: "G-EBPKBXB39H"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
    </script>

    <script>
        firebase.auth().onAuthStateChanged(function (user) {
            if (user) {
                document.getElementById("not_login_links").classList += " d-none";
                document.getElementById("login_links").classList = "";

                document.getElementById("uid").innerText = user.uid;
                document.getElementById("email").innerText = user.email;
            }
        });

        var meta_fetch_req = new XMLHttpRequest();
        meta_fetch_req.open("GET", '../meta.json');
        meta_fetch_req.send();

        meta_fetch_req.onload = (e) => {
            const data = JSON.parse(meta_fetch_req.response);

            document.getElementById("ver_tag").innerText = data.buildId ? data.buildId : "n/a";
            document.getElementById("build_time").innerText = new Date(data.buildTime).toLocaleString();
        }
    </script>
</body>

</html>